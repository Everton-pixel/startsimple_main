CREATE TABLE IF NOT EXISTS usuarios (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nome TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    senha TEXT NOT NULL,
    data_cadastro TEXT DEFAULT (datetime('now'))
);

CREATE TABLE IF NOT EXISTS ideias (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    titulo TEXT NOT NULL,
    imagem TEXT,
    etapas TEXT,
    custo_estimado REAL,
    divulgacao TEXT,
    tags TEXT,
    categoria TEXT
);

CREATE TABLE IF NOT EXISTS ideias_salvas (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    id_usuario INTEGER NOT NULL,
    id_ideia INTEGER NOT NULL,
    data_salva TEXT DEFAULT (datetime('now')),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id),
    FOREIGN KEY (id_ideia) REFERENCES ideias(id)
);

CREATE TABLE IF NOT EXISTS planos_semanais (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    id_usuario INTEGER NOT NULL,
    titulo TEXT NOT NULL,
    descricao TEXT,
    progresso INTEGER DEFAULT 0,
    data_inicio TEXT DEFAULT (datetime('now')),
    data_fim TEXT,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id)
);

CREATE TABLE IF NOT EXISTS conteudos_aprendizado (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    titulo TEXT NOT NULL,
    texto TEXT NOT NULL,
    imagem TEXT,
    categoria TEXT
);

CREATE TABLE IF NOT EXISTS conquistas (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nome TEXT NOT NULL,
    descricao TEXT,
    icone TEXT
);

CREATE TABLE IF NOT EXISTS conquistas_usuario (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    id_usuario INTEGER NOT NULL,
    id_conquista INTEGER NOT NULL,
    data_conquista TEXT DEFAULT (datetime('now')),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id),
    FOREIGN KEY (id_conquista) REFERENCES conquistas(id)
);

CREATE TABLE IF NOT EXISTS mentor_ia_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    id_usuario INTEGER NOT NULL,
    entrada_usuario TEXT NOT NULL,
    resposta_ia TEXT,
    data_interacao TEXT DEFAULT (datetime('now')),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id)
);